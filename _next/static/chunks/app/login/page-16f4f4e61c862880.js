(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{4273:function(t,e,s){Promise.resolve().then(s.bind(s,9230))},9230:function(t,e,s){"use strict";let r;s.r(e),s.d(e,{default:function(){return j}});var i=s(121),n=s(3012),u=s(1209),a=s(906),c=s(8227),h=s(2438),o=s(2833),l=s(2837),d=s(4675),p=class extends l.l{constructor(t,e){super(),this.options=e,this.#t=t,this.#e=null,this.bindMethods(),this.setOptions(e)}#t;#s=void 0;#r=void 0;#i=void 0;#n;#u;#e;#a;#c;#h;#o;#l;#d;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#s.addObserver(this),f(this.#s,this.options)?this.#f():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return v(this.#s,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return v(this.#s,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#y(),this.#R(),this.#s.removeObserver(this)}setOptions(t,e){let s=this.options,r=this.#s;if(this.options=this.#t.defaultQueryOptions(t),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled)throw Error("Expected enabled to be a boolean");this.#m(),this.#s.setOptions(this.options),s._defaulted&&!(0,c.VS)(this.options,s)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#s,observer:this});let i=this.hasListeners();i&&y(this.#s,r,this.options,s)&&this.#f(),this.updateResult(e),i&&(this.#s!==r||this.options.enabled!==s.enabled||this.options.staleTime!==s.staleTime)&&this.#g();let n=this.#b();i&&(this.#s!==r||this.options.enabled!==s.enabled||n!==this.#d)&&this.#Q(n)}getOptimisticResult(t){let e=this.#t.getQueryCache().build(this.#t,t),s=this.createResult(e,t);return(0,c.VS)(this.getCurrentResult(),s)||(this.#i=s,this.#u=this.options,this.#n=this.#s.state),s}getCurrentResult(){return this.#i}trackResult(t,e){let s={};return Object.keys(t).forEach(r=>{Object.defineProperty(s,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),e?.(r),t[r])})}),s}trackProp(t){this.#p.add(t)}getCurrentQuery(){return this.#s}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){let e=this.#t.defaultQueryOptions(t),s=this.#t.getQueryCache().build(this.#t,e);return s.isFetchingOptimistic=!0,s.fetch().then(()=>this.createResult(s,e))}fetch(t){return this.#f({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#i))}#f(t){this.#m();let e=this.#s.fetch(this.options,t);return t?.throwOnError||(e=e.catch(c.ZT)),e}#g(){if(this.#y(),c.sk||this.#i.isStale||!(0,c.PN)(this.options.staleTime))return;let t=(0,c.Kp)(this.#i.dataUpdatedAt,this.options.staleTime);this.#o=setTimeout(()=>{this.#i.isStale||this.updateResult()},t+1)}#b(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#s):this.options.refetchInterval)??!1}#Q(t){this.#R(),this.#d=t,!c.sk&&!1!==this.options.enabled&&(0,c.PN)(this.#d)&&0!==this.#d&&(this.#l=setInterval(()=>{(this.options.refetchIntervalInBackground||o.j.isFocused())&&this.#f()},this.#d))}#v(){this.#g(),this.#Q(this.#b())}#y(){this.#o&&(clearTimeout(this.#o),this.#o=void 0)}#R(){this.#l&&(clearInterval(this.#l),this.#l=void 0)}createResult(t,e){let s;let r=this.#s,i=this.options,n=this.#i,u=this.#n,a=this.#u,h=t!==r?t.state:this.#r,{state:o}=t,l={...o},p=!1;if(e._optimisticResults){let s=this.hasListeners(),n=!s&&f(t,e),u=s&&y(t,r,e,i);(n||u)&&(l={...l,...(0,d.z)(o.data,t.options)}),"isRestoring"===e._optimisticResults&&(l.fetchStatus="idle")}let{error:v,errorUpdatedAt:m,status:g}=l;if(e.select&&void 0!==l.data){if(n&&l.data===u?.data&&e.select===this.#a)s=this.#c;else try{this.#a=e.select,s=e.select(l.data),s=(0,c.oE)(n?.data,s,e),this.#c=s,this.#e=null}catch(t){this.#e=t}}else s=l.data;if(void 0!==e.placeholderData&&void 0===s&&"pending"===g){let t;if(n?.isPlaceholderData&&e.placeholderData===a?.placeholderData)t=n.data;else if(t="function"==typeof e.placeholderData?e.placeholderData(this.#h?.state.data,this.#h):e.placeholderData,e.select&&void 0!==t)try{t=e.select(t),this.#e=null}catch(t){this.#e=t}void 0!==t&&(g="success",s=(0,c.oE)(n?.data,t,e),p=!0)}this.#e&&(v=this.#e,s=this.#c,m=Date.now(),g="error");let b="fetching"===l.fetchStatus,Q="pending"===g,I="error"===g,O=Q&&b,C=void 0!==s;return{status:g,fetchStatus:l.fetchStatus,isPending:Q,isSuccess:"success"===g,isError:I,isInitialLoading:O,isLoading:O,data:s,dataUpdatedAt:l.dataUpdatedAt,error:v,errorUpdatedAt:m,failureCount:l.fetchFailureCount,failureReason:l.fetchFailureReason,errorUpdateCount:l.errorUpdateCount,isFetched:l.dataUpdateCount>0||l.errorUpdateCount>0,isFetchedAfterMount:l.dataUpdateCount>h.dataUpdateCount||l.errorUpdateCount>h.errorUpdateCount,isFetching:b,isRefetching:b&&!Q,isLoadingError:I&&!C,isPaused:"paused"===l.fetchStatus,isPlaceholderData:p,isRefetchError:I&&C,isStale:R(t,e),refetch:this.refetch}}updateResult(t){let e=this.#i,s=this.createResult(this.#s,this.options);if(this.#n=this.#s.state,this.#u=this.options,void 0!==this.#n.data&&(this.#h=this.#s),(0,c.VS)(s,e))return;this.#i=s;let r={};t?.listeners!==!1&&(()=>{if(!e)return!0;let{notifyOnChangeProps:t}=this.options,s="function"==typeof t?t():t;if("all"===s||!s&&!this.#p.size)return!0;let r=new Set(s??this.#p);return this.options.throwOnError&&r.add("error"),Object.keys(this.#i).some(t=>this.#i[t]!==e[t]&&r.has(t))})()&&(r.listeners=!0),this.#I({...r,...t})}#m(){let t=this.#t.getQueryCache().build(this.#t,this.options);if(t===this.#s)return;let e=this.#s;this.#s=t,this.#r=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#I(t){h.V.batch(()=>{t.listeners&&this.listeners.forEach(t=>{t(this.#i)}),this.#t.getQueryCache().notify({query:this.#s,type:"observerResultsUpdated"})})}};function f(t,e){return!1!==e.enabled&&void 0===t.state.data&&!("error"===t.state.status&&!1===e.retryOnMount)||void 0!==t.state.data&&v(t,e,e.refetchOnMount)}function v(t,e,s){if(!1!==e.enabled){let r="function"==typeof s?s(t):s;return"always"===r||!1!==r&&R(t,e)}return!1}function y(t,e,s,r){return(t!==e||!1===r.enabled)&&(!s.suspense||"error"!==t.state.status)&&R(t,s)}function R(t,e){return!1!==e.enabled&&t.isStaleByTime(e.staleTime)}var m=n.createContext((r=!1,{clearReset:()=>{r=!1},reset:()=>{r=!0},isReset:()=>r})),g=()=>n.useContext(m),b=n.createContext(!1),Q=()=>n.useContext(b);b.Provider;var I=(t,e)=>{(t.suspense||t.throwOnError)&&!e.isReset()&&(t.retryOnMount=!1)},O=t=>{n.useEffect(()=>{t.clearReset()},[t])},C=t=>{var e;let{result:s,errorResetBoundary:r,throwOnError:i,query:n}=t;return s.isError&&!r.isReset()&&!s.isFetching&&n&&(e=[s.error,n],"function"==typeof i?i(...e):!!i)},S=t=>{t.suspense&&"number"!=typeof t.staleTime&&(t.staleTime=1e3)},E=(t,e)=>t?.suspense&&e.isPending,x=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()}),A=s(2556),w=s(5955),k=s(8758),U={src:"/_next/static/media/btnG_official.6ef7dd86.png",height:200,width:920,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAIAAADq9gq6AAAAN0lEQVR42mPQPJGYfaHF9XSex+mCgDMloWfLgQyGY5EMGicSsy60+J8pASK/M8VACd8zxQzHIgBW8BfbLEAfFgAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:2};function T(t){let{prevUrl:e}=t,s=(0,a.NL)(),r=function(t,e,s){let r=(0,a.NL)(s),i=Q(),u=g(),c=r.defaultQueryOptions(t);c._optimisticResults=i?"isRestoring":"optimistic",S(c),I(c,u),O(u);let[o]=n.useState(()=>new e(r,c)),l=o.getOptimisticResult(c);if(n.useSyncExternalStore(n.useCallback(t=>{let e=i?()=>void 0:o.subscribe(h.V.batchCalls(t));return o.updateResult(),e},[o,i]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),n.useEffect(()=>{o.setOptions(c,{listeners:!1})},[c,o]),E(c,l))throw x(c,o,u);if(C({result:l,errorResetBoundary:u,throwOnError:c.throwOnError,query:r.getQueryCache().get(c.queryHash)}))throw l.error;return c.notifyOnChangeProps?l:o.trackResult(l)}({queryKey:["auth"],queryFn:async()=>{let t=await fetch("".concat("https://api.cheda.kr","/services/auth/v1/me"),{credentials:"include"});return t.ok?t.json():null}},p,void 0);return r.isLoading?(0,i.jsx)(k.O,{className:"w-[230px] h-[50px]"}):r.data?(0,i.jsx)(A.default,{onClick:()=>{s.invalidateQueries({queryKey:["auth"]})},href:"".concat("https://api.cheda.kr","/services/auth/v1/logout"),children:(0,i.jsx)(w.default,{src:U,alt:"Naver 로그아웃",width:230,height:50,unoptimized:!0})}):(0,i.jsx)(A.default,{href:"".concat("https://api.cheda.kr","/services/auth/v1/login").concat(e?"?prevUrl=".concat(e):""),children:(0,i.jsx)(w.default,{src:U,alt:"Naver 로그인",width:230,height:50,unoptimized:!0})})}var F=s(8795);function j(){return(0,i.jsxs)("div",{className:"flex flex-col space-y-5 justify-center items-center min-h-[calc(100vh-100px)]",children:[(0,i.jsx)("h2",{className:"text-3xl font-bold",children:"체다 서비스에 로그인"}),(0,i.jsx)(n.Suspense,{children:(0,i.jsx)(D,{})})]})}function D(){var t;let e=(0,F.Z)(),s=(0,u.useRouter)(),r=decodeURIComponent(null!==(t=(0,u.useSearchParams)().get("prevUrl"))&&void 0!==t?t:"");return(0,n.useEffect)(()=>{var t;(null===(t=e.data)||void 0===t?void 0:t.loggedIn)&&s.push(r||"/")},[s,r,e.data]),(0,i.jsx)(T,{prevUrl:decodeURIComponent(r)})}},8758:function(t,e,s){"use strict";s.d(e,{O:function(){return n}});var r=s(121),i=s(58);function n(t){let{className:e,...s}=t;return(0,r.jsx)("div",{className:(0,i.cn)("animate-pulse rounded-md bg-muted",e),...s})}},8795:function(t,e,s){"use strict";s.d(e,{Z:function(){return c}});var r=s(3551),i=s(7827),n=s(103),u=s(8915);let a=(0,i.el)(()=>({queryKey:["auth"],queryFn:async()=>{var t,e;let s=null===(e=document.cookie.split("; ").find(t=>t.startsWith("session_id=")))||void 0===e?void 0:null===(t=e.match(/^([^=]+)=(.*)/))||void 0===t?void 0:t[2];try{let t=await (0,n.js)(u.env.NEXT_PUBLIC_JWT_KEY,"ES256"),e=await (0,n._f)(null!=s?s:"",t);return{loggedIn:!0,user:e.payload["http:cheda.kr/user"]}}catch(s){let t=await fetch("".concat("https://api.cheda.kr","/services/auth/v1/me"),{credentials:"include"});if(!t.ok)return{loggedIn:!1,user:null};let e=await t.json();return{loggedIn:!0,user:{userId:e.id,userName:e.name,userImage:e.image}}}}}));function c(){return(0,r.Dv)(a)}},58:function(t,e,s){"use strict";s.d(e,{cn:function(){return n}});var r=s(6349),i=s(35);function n(){for(var t=arguments.length,e=Array(t),s=0;s<t;s++)e[s]=arguments[s];return(0,i.m6)((0,r.W)(e))}}},function(t){t.O(0,[723,483,418,516,744],function(){return t(t.s=4273)}),_N_E=t.O()}]);